# Duely

## Описание

- Единственная входная точка для пользователя.
- Хранение пользователей, рейтинга.
- Подбор соперника для дуэли.
- Управление дуэлями.
- Выдача id задачи для дуэли.
- Выдача информации про дуэль.
- Контроль за правилами и временем дуэли.
- Инициирование проверки решения.
- Хранение посылок участника дуэли.
- Получение вердикта.
- Завершение и формирование результата дуэли.
- Пересчёт рейтинга участников.
- Выдача истории дуэлей пользователя.

## Домен

### Сущности

- Пользователь:
    - id
    - ник
    - рейтинг
- Дуэль:
    - id
    - два пользователя
    - время начала, максимальная продолжительность, время реального конца
    - задача
    - результат (кто выиграл либо ничья)
    - изменение рейтинга пользователей
    - посылки пользователей
- Посылка:
    - id
    - пользователь
    - дуэль
    - время отправки
    - код, язык
    - текущий статус
    - вердикт тестирования

### Процессы

- Пользователь встаёт в очередь ожидания дуэли
- Пользователь выходит из очереди ожидания дуэли
- Система определяет двух участников и начинает дуэль
- Пользователь отправляет посылку на тестирование
- Система получает обновление статуса либо вердикт тестирования посылки
- Система заканчивает дуэль
- Пользователь смотрит историю своих дуэлей
- Пользователь смотрит одну из своих дуэлей

## Интеграция

- Пользователь встаёт в очередь ожидания дуэли
    - фронтенд делает запрос на установку WS соединения
- Пользователь выходит из очереди ожидания дуэли
    - фронтенд обрывает WS соединение
- Система определяет двух участников и начинает дуэль
    - бэкенд отправляет в WS сообщение о начале дуэли
    - фронтенд делает HTTP GET запрос дуэли
- Пользователь отправляет посылку на тестирование
    - фронтенд отправляет посылку в WS
    - бэкенд отправляет в WS сообщение о создании посылки
- Система получает обновление статуса либо вердикт тестирования посылки
    - бэкенд отправляет в WS сообщение об обновлении статуса или вердикте тестирования посылки
- Система заканчивает дуэль
    - бэкенд отправляет обоим пользователям в WS сообщение о завершении дуэли

## API
TODO

## Схема данных
TODO
